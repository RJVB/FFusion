#!/bin/bash

if [ "$DLLTOOL" = "" ] ;then
	DLLTOOL="i386-mingw32-dlltool"
fi

ARGS=""

while [ $# != 0 ] ;do
	case $1 in
		/machine:*)
			ARGS="${ARGS} -m ${1#/machine:}"
			;;
		/def:*)
			DEFNAME="${1#/def:}"
			ARGS="${ARGS} -d ${DEFNAME} -D ${DEFNAME%.def}.dll"
			;;
		/out:*)
			ARGS="${ARGS} -l ${1#/out:}"
			;;
		*)
			echo "Ignored argument '$1'" 1>&2
			;;
	esac
	shift
done

echo ${DLLTOOL} ${ARGS}
exec ${DLLTOOL} ${ARGS}
